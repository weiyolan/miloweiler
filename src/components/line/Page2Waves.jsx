import React, { useEffect } from "react"
// import { useDimensions } from "@/utils/useDimensions"
import { useAppContext } from "@utils/appContext.js"
// import { Path, TextAnimate } from '@/components/line/pathUtils'
// import { SVGWrapper } from "./contextSVG"
import { usePageContext } from "@utils/pageContext"
// import { PageWrapper } from "@context/pageContext"
// import AnimateSVG from "./AnimateSVG"
// import AnimateSVGBanner from "./AnimateSVGBanner"
// import { gsap } from "gsap/dist/gsap"
import { PathGSAP, PathGSAPStandalone } from "./pathUtilsGsap"
// import { ScrollTrigger } from "gsap/dist/ScrollTrigger"
// import useStateRef from "@/utils/useStateRef"
// gsap.registerPlugin(ScrollTrigger)

let waves = [
  "M1365.05 424.64C1387.77 435.33 1397.7 406.8 1415.16 415.81C1432.63 424.82 1421.17 450.96 1433.59 457.3C1446.01 463.65 1467.65 442.35 1478.28 449.83C1488.91 457.32 1480.34 472.83 1492.59 477.6C1504.85 482.38 1511.95 475.77 1517.65 480.11C1523.34 484.45 1528.54 497.9 1534.67 500.29",
  "M563.562 218.71C543.502 201.39 564.033 179.1 556.31 169.89C548.587 160.67 528.458 173.85 518.01 161.39C507.561 148.93 528.621 137.38 517.344 129.25C506.067 121.12 497.601 133.02 485.097 119",
  "M448.066 520.57C423.846 531.34 437.037 558.62 426.975 565.2C416.914 571.77 398.612 556.3 385 565.2C371.388 574.1 377.093 586.1 372.5 593.1C367.907 600.1 356.5 593.1 350 605.24C346.5 613.74 345.5 613.24 340 618.24",
  "M348.731 385.95C322.268 384.47 321.554 414.77 309.599 416.03C297.644 417.29 288.423 395.16 272.25 396.87C256.077 398.58 255.675 411.86 248.393 415.99C241.111 420.12 234.157 408.69 222.831 416.53C215.837 422.49 215.176 421.59 208 423.53",
  "M1432 298.38C1458.5 298.6 1457.78 268.31 1469.66 266.48C1481.54 264.65 1491.8 286.31 1507.88 283.84C1523.95 281.37 1521.1 269.74 1530.8 263.61C1540.5 257.48 1544.5 271 1556.46 267.58",
  "M364.123 268.45C360.249 264.68 357.87 262.71 353.641 261.92C348.726 261 337.648 268.61 330.149 265.17C322.65 261.74 325.463 252.1 318.296 244.15C311.129 236.2 299.039 246.51 290.769 239.03C286.525 235.18 288.518 232 281.477 226.11",
  "M1316 568C1322 575.5 1341.5 566 1347.5 574.5C1353.5 583 1340.5 593.5 1347.5 601C1354.5 608.5 1365.5 605 1369.5 609.5C1372.5 614 1368 622 1375.5 629",
  "M662.85 90.6001C651.725 77.1601 662.241 69.7099 658.561 63.4399C654.882 57.1699 647.839 57.78 644.314 49.99C640.788 42.21 647.604 43 645.642 36.12C643.68 29.23 633.171 24.74 630.825 19.22C628.48 13.7 628.226 5.96 624.405 1",
  "M1536.22 388.79C1552.78 383.3 1557.64 396.19 1564.82 395.04C1572 393.88 1574.82 387.25 1583.36 386.79C1591.89 386.33 1594.38 393.41 1601.5 394.08C1608.63 394.75 1610.76 389.66 1618.34 388.9C1624.29 388.3 1630.46 390.78 1635.35 390.78",
  "M243.473 317.96C226.456 321.81 222.868 308.51 215.612 308.96C208.357 309.41 204.899 315.74 196.363 315.36C187.827 314.99 186.037 307.71 179.009 306.34C171.981 304.98 169.366 309.85 161.751 309.86C155.767 309.88 149.87 306.81 145 306.33",
  "M1476 607.55C1487.71 620.49 1494.54 607.67 1500.22 612.21C1505.9 616.75 1506.33 627.11 1513.53 631.71C1520.73 636.32 1520.92 629.46 1527.46 632.39C1533.99 635.31 1537.11 647.46 1542.24 650.57C1547.53 653.78 1555.67 653.4 1559.33 657.87",
  "M313.068 149.01C296.19 144.59 299.125 131.14 292.478 128.2C285.831 125.25 279.847 129.28 272.442 125.02C265.036 120.76 266.8 113.47 261.188 109.02C255.576 104.58 251.015 107.69 244.246 104.2C238.928 101.46 235.105 96.0201 231 93.3601",
]

let wavesMobile = [
  "M373 296.617C395.72 307.307 405.65 278.777 423.11 287.787C440.58 296.797 429.12 322.937 441.54 329.277C453.96 335.627 475.6 314.328 486.23 321.808C496.86 329.298 488.29 344.808 500.54 349.578C512.8 354.358 519.9 347.748 525.6 352.088C531.29 356.428 536.49 369.877 542.62 372.267",
  "M200.465 164.71C180.405 147.39 200.936 125.1 193.213 115.89C185.49 106.67 165.361 119.85 154.913 107.39C144.464 94.9299 165.524 83.38 154.247 75.25C142.97 67.12 134.504 79.02 122 65",
  "M166.066 345C141.846 355.77 155.037 383.05 144.975 389.63C134.914 396.2 116.612 380.73 103 389.63C89.388 398.53 95.093 410.53 90.5 417.53C85.907 424.53 74.5 417.53 68 429.67C64.5 438.17 63.5 437.67 58 442.67",
  "M121.731 287.052C95.268 285.572 94.554 315.873 82.599 317.133C70.644 318.393 61.423 296.263 45.25 297.973C29.077 299.683 28.675 312.963 21.393 317.093C14.111 321.223 7.15699 309.793 -4.16901 317.633C-11.163 323.593 -11.824 322.693 -19 324.633",
  "M419 195.387C445.5 195.607 444.78 165.317 456.66 163.487C468.54 161.657 478.8 183.317 494.88 180.847C510.95 178.377 508.1 166.747 517.8 160.617C527.5 154.487 531.5 168.007 543.46 164.587",
  "M128.646 180.34C124.772 176.57 122.393 174.6 118.164 173.81C113.249 172.89 102.171 180.5 94.672 177.06C87.173 173.63 89.986 163.99 82.819 156.04C75.652 148.09 63.562 158.4 55.292 150.92C51.048 147.07 53.041 143.89 46 138",
  "M334.604 382C339.622 390.189 360.154 383.194 365.048 392.376C369.941 401.558 355.734 410.355 361.744 418.669C367.755 426.983 379.105 424.882 382.513 429.845C384.929 434.684 379.466 442.061 386.035 449.941",
  "M204.445 91.6001C193.32 78.1601 203.836 70.7099 200.156 64.4399C196.477 58.1699 189.434 58.78 185.909 50.99C182.383 43.21 189.199 44 187.237 37.12C185.275 30.23 174.766 25.74 172.42 20.22C170.075 14.7 169.821 6.96 166 2",
  "M462 265.021C478.56 259.531 483.42 272.421 490.6 271.271C497.78 270.111 500.6 263.481 509.14 263.021C517.67 262.561 520.16 269.642 527.28 270.312C534.41 270.982 536.54 265.891 544.12 265.131C550.07 264.531 556.24 267.011 561.13 267.011",
  "M100.473 216.86C83.456 220.71 79.868 207.41 72.612 207.86C65.357 208.31 61.899 214.64 53.363 214.26C44.827 213.89 43.037 206.61 36.009 205.24C28.981 203.88 26.366 208.75 18.751 208.76C12.767 208.78 6.87 205.71 2 205.23",
  "M414 374C425.71 386.94 432.54 374.12 438.22 378.66C443.9 383.2 444.33 393.56 451.53 398.16C458.73 402.77 458.92 395.91 465.46 398.84C471.99 401.76 475.11 413.91 480.24 417.02C485.53 420.23 493.67 419.85 497.33 424.32",
  "M106.068 120.65C89.19 116.23 92.125 102.78 85.478 99.8398C78.831 96.8898 72.847 100.92 65.442 96.6599C58.036 92.3999 59.8 85.1099 54.188 80.6599C48.576 76.2199 44.015 79.3298 37.246 75.8398C31.928 73.0998 28.105 67.66 24 65",
]

export default function Page2Waves({ className, style, scrubTl, transitionTl, animationName }) {

  let { locale, scrolled } = useAppContext()

  let { mobile } = usePageContext()

  let fishTweens = [
    {
      timeline: scrubTl,
      id: `fishScrub`,
      ratio: 0.5,
      attr: {
        duration: 0.9,
        ease: 'power3.out',
        // onStart:()=>{console.log('start One')} 
      },
      position: 0.1
    },
  ]

  let fishFinal = ["M565.227 629.19C563.57 629.02 562.174 626.36 560.974 624.75C558.103 620.9 562.437 622.43 563.474 625.58C563.941 626.99 565.183 627.6 565.227 629.19ZM565.227 629.19C566.885 629.36 562.534 627.08 563.474 627.08L561.974 625.58L565.227 629.19Z"]
  let fishFinalMobile = ["M361.65 473.31C359.993 473.14 358.597 470.48 357.397 468.87C354.526 465.02 358.86 466.55 359.897 469.7C360.364 471.11 361.606 471.72 361.65 473.31ZM361.65 473.31C363.308 473.48 358.957 471.2 359.897 471.2L358.397 469.7L361.65 473.31Z"]

  useEffect(() => {
    scrubTl && scrubTl
      .to('#fish', {
        opacity: 1,
        duration: 0.1
      }, 1)
      .to('#toFish', {
        opacity: 0,
        duration: 0.1
      }, 1)
      .to('#fish', {
        motionPath: {
          path: '#alongPath',
          align: '#alongPath',
          immediateRender: true,
          alignOrigin: [0.5, 0.5],
          autoRotate: 130,
        },
        ease: 'ease.inout',
        duration: 1,
        transformOrigin: "50% 50%",
      }, 1.05)
      .to('#fish', {
        attr: { d: mobile ? fishFinalMobile[0] : fishFinal[0] },
        duration: 0.5,
      }, 1.55)
      .to('#fish', {
        opacity: 0,
        duration: 0.05,
      }, 1.95)
  }, [scrubTl])
  let colorPrimary = '#FFF5EA'
  return (
    <div style={{ ...style }} className={`${animationName} ${className && className}`}>
      {mobile ?
        <>
          <svg className={`${animationName}Inner w-full h-full relative top-[0]`} alt='wave animation' width="569" height="511" viewBox="0 0 569 511" fill="none" xmlns="http://www.w3.org/2000/svg">

            {/* ====== WAVES ========  */}
            {/* <g id="mobilePage" clipPath="url(#clip0_894_1488)"> */}
            {wavesMobile.map((wavePath, i) => <PathGSAPStandalone tweens={[{ timeline: transitionTl, id: `wave${i}Transition`, ratio: 1, attr: { duration: 1, ease: 'none' }, position: 1.4 + (i) * 0.1 }]}
              className='' transitStrokeAnimation transitPortion={0.6} scrolled={0} key={'wavePath' + i} id={'wavePath' + i} d={wavePath} />)}
            <g className="fishGroup translate-y-24">
              <PathGSAPStandalone tweens={fishTweens} inverse={true} transitStrokeAnimation transitPortion={0.52} id="toFish" d="M373.923 497.58L386.298 484.19C383.456 484.45 378.901 485.48 373.923 485.64C367.923 485.64 361.584 484.05 356.022 479.1C345.923 470.12 361.923 458.12 370.179 470.73C372.692 474.57 372.434 478.13 372.037 484.19C370.3 510.68 391.465 505.08 398.423 500.62C415.603 489.61 401.694 471 408.731 464.96C415.768 458.91 429.067 478.13 440.71 468.72" stroke={colorPrimary} strokeWidth="2" />
              <path opacity={0} id="fish" d="M371.407 485.33C365.796 484.75 359.964 482.8 355.9 477.35C346.177 464.31 367.238 459.62 370.749 470.28C372.33 475.08 371.259 479.94 371.407 485.33ZM371.407 485.33C377.022 485.91 382.415 485.13 385.598 485.13L371.81 498.92L371.407 485.33Z" stroke={colorPrimary} strokeWidth="2" strokeLinecap="round" />
              <path opacity={0} id="alongPath" d="M368.423 479.62C344.923 459.12 346.423 433.12 316.923 433.12C299.923 433.12 266.423 442.12 266.423 468.62" stroke="black" />
              {/* <path id="fishFinal" d="M361.65 473.31C359.993 473.14 358.597 470.48 357.397 468.87C354.526 465.02 358.86 466.55 359.897 469.7C360.364 471.11 361.606 471.72 361.65 473.31ZM361.65 473.31C363.308 473.48 358.957 471.2 359.897 471.2L358.397 469.7L361.65 473.31Z" stroke={colorPrimary} strokeWidth="2" strokeLinecap="round" /> */}
            </g>
            {/* </g> */}

            <defs>
              <clipPath id="clip0_894_1488">
                <rect width="569" height="511" fill="white" />
              </clipPath>
            </defs>
          </svg>

          <svg className={`${animationName}Inner w-full h-full absolute top-[10vh]`} alt='fish animation' width="569" height="511" viewBox="0 0 569 511" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g className="fishGroup ">
              <PathGSAPStandalone tweens={fishTweens} inverse={true} transitStrokeAnimation transitPortion={0.52} id="toFish" d="M373.923 497.58L386.298 484.19C383.456 484.45 378.901 485.48 373.923 485.64C367.923 485.64 361.584 484.05 356.022 479.1C345.923 470.12 361.923 458.12 370.179 470.73C372.692 474.57 372.434 478.13 372.037 484.19C370.3 510.68 391.465 505.08 398.423 500.62C415.603 489.61 401.694 471 408.731 464.96C415.768 458.91 429.067 478.13 440.71 468.72" stroke={colorPrimary} strokeWidth="2" />
              <path opacity={0} id="fish" d="M371.407 485.33C365.796 484.75 359.964 482.8 355.9 477.35C346.177 464.31 367.238 459.62 370.749 470.28C372.33 475.08 371.259 479.94 371.407 485.33ZM371.407 485.33C377.022 485.91 382.415 485.13 385.598 485.13L371.81 498.92L371.407 485.33Z" stroke={colorPrimary} strokeWidth="2" strokeLinecap="round" />
              <path opacity={0} id="alongPath" d="M368.423 479.62C344.923 459.12 346.423 433.12 316.923 433.12C299.923 433.12 266.423 442.12 266.423 468.62" stroke="black" />
              {/* <path id="fishFinal" d="M361.65 473.31C359.993 473.14 358.597 470.48 357.397 468.87C354.526 465.02 358.86 466.55 359.897 469.7C360.364 471.11 361.606 471.72 361.65 473.31ZM361.65 473.31C363.308 473.48 358.957 471.2 359.897 471.2L358.397 469.7L361.65 473.31Z" stroke={colorPrimary} strokeWidth="2" strokeLinecap="round" /> */}
            </g>
          </svg>
        </>

        :
        <svg className={`${animationName}Inner w-full h-full relative top-[0]`} alt='wave animation' width="1782" height="667" viewBox="0 0 1782 667" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id='desktopPage1'>
            {/* ====== WAVES ========  */}
            {waves.map((wavePath, i) => <PathGSAPStandalone tweens={[{ timeline: transitionTl, id: `wave${i}Transition`, ratio: 1, attr: { duration: 1, ease: 'none' }, position: 1.4 + (i) * 0.1 }]}
              className='' transitStrokeAnimation transitPortion={0.6} scrolled={0} key={'wavePath' + i} id={'wavePath' + i} d={wavePath} />)}
            {/* ====== FISH ========  */}
            <PathGSAPStandalone tweens={fishTweens} inverse={true} transitStrokeAnimation transitPortion={0.52} id="toFish" d="M577.5 653.46L589.875 640.07C587.033 640.33 582.478 641.36 577.5 641.52C571.5 641.52 565.161 639.93 559.599 634.98C549.5 626 565.5 614 573.756 626.61C576.269 630.45 576.011 634.01 575.614 640.07C573.877 666.56 595.042 660.96 602 656.5C619.18 645.49 605.271 626.88 612.308 620.84C619.345 614.79 632.644 634.01 644.287 624.6" stroke={colorPrimary} strokeWidth="2" />
            <path opacity={0} id="fish" d="M574.984 641.21C569.373 640.63 563.541 638.68 559.477 633.23C549.754 620.19 570.815 615.5 574.326 626.16C575.907 630.96 574.836 635.82 574.984 641.21ZM574.984 641.21C580.599 641.79 585.992 641.01 589.175 641.01L575.387 654.8L574.984 641.21Z" stroke={colorPrimary} strokeWidth="2" strokeLinecap="round" />
            <path opacity={0} id="alongPath" d="M572 635.5C548.5 615 550 589 520.5 589C503.5 589 470 598 470 624.5" stroke="black" />
            {/* <path id="fishFinal" d="M565.227 629.19C563.57 629.02 562.174 626.36 560.974 624.75C558.103 620.9 562.437 622.43 563.474 625.58C563.941 626.99 565.183 627.6 565.227 629.19ZM565.227 629.19C566.885 629.36 562.534 627.08 563.474 627.08L561.974 625.58L565.227 629.19Z" stroke={colorPrimary} strokeWidth="2" /> */}
          </g>

        </svg>}


    </div>
  )
}